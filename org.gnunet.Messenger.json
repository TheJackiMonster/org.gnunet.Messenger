{
  "app-id": "org.gnunet.Messenger",
  "runtime": "org.gnome.Platform",
  "runtime-version": "42",
  "sdk": "org.gnome.Sdk",
  "command": "messenger-gtk",
  "finish-args": [
    "--share=ipc",
	"--socket=wayland",
	"--socket=fallback-x11",
	"--share=network",
	"--socket=pulseaudio",
	"--device=dri",

	/* Home directory access to share files */
	"--filesystem=home",
	
	/* Webcam access to scan QR codes */
	"--device=all"
  ],
  "cleanup": [
    "/bin/Magick*-config",
    "/include",
    "/lib/pkgconfig",
    "/share/aclocal",
    "/share/man",
    "/share/info",
    "*.la",
    "*.a"
  ],
  "modules": [
    {
	  "name": "recutils",
	  "buildsystem": "autotools",
	  "sources": [
	    {
		  "type": "archive",
		  "url": "https://ftp.gnu.org/gnu/recutils/recutils-1.9.tar.gz",
		  "sha512": "775b3b8925a4e5c6f04c6376291b966bdc271f172be2bca06b1f02155ecba12d916c22219f85fe0393f7f9f200f3788ab5fa5d522da2b84b2a0c0ec198318809"
		}
	  ]
	},
	{
	  "name": "jansson",
	  "buildsystem": "autotools",
	  "sources": [
	    {
		  "type": "archive",
		  "url": "https://digip.org/jansson/releases/jansson-2.13.tar.gz",
		  "sha512": "79e26745e257118d4860cbfd57e250834c0766523d7f5c3d9e34438805f9c3064a5890ba3108292e5f2cb24d77a77049ffddd17332c65c293b70fb91869b67e6"
		}
	  ]
	},
	{
	  "name": "libsodium",
	  "buildsystem": "autotools",
	  "sources": [
	    {
		  "type": "archive",
		  "url": "https://download.libsodium.org/libsodium/releases/libsodium-1.0.18.tar.gz",
		  "sha512": "17e8638e46d8f6f7d024fe5559eccf2b8baf23e143fadd472a7d29d228b186d86686a5e6920385fe2020729119a5f12f989c3a782afbd05a8db4819bb18666ef"
		}
	  ]
	},
    {
	  "name": "gnunet",
	  "buildsystem": "autotools",
	  "sources": [
	    {
		  "type": "archive",
		  "url": "https://ftpmirror.gnu.org/gnunet/gnunet-0.17.0.tar.gz",
		  "sha512": "4a6a322b9dfd8c001cec058e085401bbbd07641532be14ae8ec2d913f45695e172ca8b7cb8e4cef9a2801999b009196082017bc837f2d9aaf9cc72cb149247ca"
		}
	  ]
	},
	{
	  "name": "libgnunetchat",
	  "buildsystem": "simple",
	  "build-commands": [
	    "make release",
		"make INSTALL_DIR='/app/' install"
	  ],
	  "sources": [
	    {
		  "type": "archive",
		  "url": "https://ftpmirror.gnu.org/gnunet/libgnunetchat-0.1.0.tar.gz",
		  "sha512": "3839336bfdecdf538b79a6c24ceef6170d221c43f70ce11a43466be1fe2d7a22baf0ab5dd9794baa0964674842516ce2f8378f2b03b378adc2ec318c1e88c277"
		}
	  ]
	},
	{
	  "name": "libqrencode",
	  "buildsystem": "autotools",
	  "sources": [
	    {
		  "type": "archive",
		  "url": "https://fukuchi.org/works/qrencode/qrencode-4.1.1.tar.gz",
		  "sha512": "209bb656ae3f391b03c7b3ceb03e34f7320b0105babf48b619e7a299528b8828449e0e7696f0b5db0d99170a81709d0518e34835229a748701e7df784e58a9ce"
		}
	  ]
	},
	{
	  "name": "imagemagick",
	  "buildsystem": "autotools",
	  "config-opts": [
		"--enable-shared=no",
	    "--enable-static=yes",
		"--disable-docs"
	  ],
	  "sources": [
	    {
		  "type": "archive",
		  "url": "https://download.imagemagick.org/ImageMagick/download/releases/ImageMagick-7.1.0-37.tar.xz",
		  "sha512": "43f116a3a6bb9794b8c8440c57a537eab29b0dac7b8ace574e3cc1e6d484054557c9e44235eb799b843ef761c6f22d29ef959f6de6b80a45a3898bee4d2f16da"
		}
	  ]
	},
	{
	  "name": "zbar",
	  "buildsystem": "autotools",
	  "config-opts": [
	    "--with-x=no",
		"--enable-pthread=yes",
		"--enable-doc=no",
		"--enable-video=yes",
		"--with-jpeg=yes",
		"--with-gtk=no",
		"--with-gir=no",
		"--with-qt=no",
		"--with-python=no",
		"--with-java=no",
		"--with-dbus=no"
	  ],
	  "sources": [
	    {
		  "type": "archive",
		  "url": "https://linuxtv.org/downloads/zbar/zbar-0.23.tar.gz",
		  "sha512": "9737f9dca42c29f92aa1eca5c0808da34f1d16c88c65241c9e3984c487e502f398437e7a707a1edd2c440f784db537ba33ea4008a2d1c1caaf5eea6431b1400b"
		}
	  ]
	},
	{
	  "name": "messenger-gtk",
	  "buildsystem": "simple",
	  "build-commands": [
	    "make release",
		"make INSTALL_DIR='/app/' install"
	  ],
	  "sources": [
	    {
		  "type": "archive",
		  "url": "https://ftpmirror.gnu.org/gnunet/messenger-gtk-0.7.0.tar.gz",
		  "sha512": "9cec8b85f2a0eb4997fc319bc84e6b32ac9f8174332c2bd53469ccdfe36bf855a0d164110b816770e0396a3eb625b25e8bc008f48227b02cc7e22797388eeb8b"
		}
	  ]
	}
  ]
}
